---
title: vim命令
date: 2018-12-23 17:53:09
tags: linux
---

> 总会忘记，这里记录一下

vim主要有3种模式：命令模式（Command mode），插入模式（Insert mode）和底行模式（Last line mode）。


### 编辑与保存

比如，`vim nginx.conf`打开nginx.conf文件，默认就是进入命令模式的。这时候键盘敲下`i`就切换到插入模式了，就可以编辑内容了，编辑过程中想撤销，怎么办？可以输`Esc`回到命令模式，然后按`u`撤销上一步的操作,`Ctrl+R`则可以恢复上一步被撤销的操作。


在命令模式输入`:`(英文冒号)可以进入底行模式。常用命令有：

+ :q  不保存,直接退出 (文件未做任何编辑)
+ :q! 不保存，并强制退出 (文件已编辑，但不想保存)
+ :w  保存编辑后的文件内容，但不退出。这个命令的作用是把内存缓冲区中的数据写到启动vim时指定的文件中。
+ w! 强制保存，不退出 （强制写文件，即强制覆盖原有文件。）
+ :wq 保存，并退出
+ wq! 强制保存，并退出

PS：`w`是`write`(write to disk)的缩写，`q`是`quit`的缩写

最后按ESC键可退出底行模式，回到命令模式。


### 复制与粘贴

在命令模式下输入:set number，可以展示文本行号。

1、在命令模式输入`V`（大写），进入按行选择模式，通过键盘上下方向键，选择复制的行文本。
2、在命令模式输入`v`（小写），进入按字符选择模式，通过键盘上下左右方向键，选择复制的文本。
3、在命令行模式下按下组合键`Ctrl+V`，进入到按块选择模式。通过键盘上下左右方向键，选择复制的区域块。

选中之后，按`y`复制，按`p`粘贴。